{"version":3,"file":"tester.esm.js","sources":["../src/utils.ts","../src/tester.tsx","../src/ConfigurationClass.ts","../src/index.ts"],"sourcesContent":["/*\n  Utilities\n*/\n\nexport function getInstance (component: any) {\n  const instance = component.instance();\n  return instance && (instance.wrappedInstance || instance);\n}\n\nexport function getValue (tester: any, value: unknown) {\n  return typeof value === 'function' ? value(tester) : value;\n}\n\nexport async function sleep (ms: number = 0) {\n  return new Promise<void>(resolve => setTimeout(resolve, ms));\n}\n\nexport function capitalize (string: string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nexport function isString (value: unknown): value is string {\n  return typeof value === 'string' || value instanceof String;\n}\n\nexport async function flushPromises () {\n  return new Promise<void>((resolve, _reject) => setImmediate(resolve));\n}\n","import React, { Fragment } from 'react';\n\nimport {\n  flushPromises,\n  getInstance,\n  getValue,\n  isString,\n  sleep,\n} from './utils';\n\nimport ConfigurationClass from './ConfigurationClass';\nimport { IHook, IProfile, ITesterOpts, IWrapper, ComponentClass, IOnInit, IOnBeforeMount } from './interfaces';\n\ntype ISelectArg = string | { simulate: (event: string) => void };\n\nconst NullComponent: React.FC<any> = (props: any) => (<Fragment {...props} />);\n\n/*\n  Name: Tester\n  Description: Testing utility class to mount a specific component with it's required wrappers.\n\n  Usage:\n    // Bootstrap Transport, localStorage + Session and an AppState.\n    const tester = new Tester(MyComponent);\n\n    // Bootstrap nothing, use with light components that doesn't need any of the above.\n    const tester = new TesterLight(MyComponent);\n\n    // Mount the component\n    await tester.mount();\n\n    // Test component that requires more JSX than the component only :\n    const new Tester(MyComponent, {mount: (<Form><MyComponent></Form>)});\n\n    // You can mount right away if no Transport or AppState modification is needed.\n    const tester = await new Tester(MyComponent).mount();\n\n    // opts.shallow is an experimental feature that allows you to test the TestedComponent instance behaviors.\n    // Please only use it when necessary.\n    const tester = await new Tester(MyComponent, { shallow: true }).mount();\n      tester.shallow.wrapper // equals to shallow(<TestedComponent {...this.props} {...this.AppState} />)\n      tester.shallow.instance // equals to tester.shallow.instance()\n*/\n\n/**\n * Testing utility class to mount a specific component with it's required wrappers.\n */\nclass Tester {\n  public static Configuration: ConfigurationClass;\n\n  public opts: ITesterOpts;\n\n  public config: ConfigurationClass;\n  public initialMount: React.ReactNode;\n  public onBeforeMount?: (tester: Tester) => Promise<void>;\n  public profile: IProfile;\n  public props: object;\n  public TestedComponent: ComponentClass;\n\n  public AppState: any;\n  public shallow: any;\n  public wrapper: any;\n\n  public constructor (TestedComponent: ComponentClass, opts: ITesterOpts = {}) {\n    this.config = Tester.Configuration;\n    this.initialMount = opts.mount;\n    this.onBeforeMount = opts.onBeforeMount;\n    this.opts = opts;\n    this.profile = {...this.config.profiles.Default, ...opts.profile};\n    this.props = opts.props || {};\n    this.TestedComponent = TestedComponent;\n\n    // Allow testing without a main TestedComponent. This require an initialMount.\n    if (!this.TestedComponent && this.initialMount) {\n      this.TestedComponent = NullComponent;\n      this.initialMount = <this.TestedComponent>{this.initialMount}</this.TestedComponent>;\n    }\n\n    // Loop through hooks onInit(),\n    const validHooks = this.config.getValidHooks(this, 'onInit') as Array<IHook & { onInit: IOnInit }>;\n    validHooks.forEach(hook => hook.onInit(this));\n  }\n\n  public getWrappers (): IWrapper[] {\n    const wrappers: IWrapper[] = [];\n\n    this.config.getValidHooks(this, 'component').forEach((hook: IHook) => {\n      wrappers.push({\n        component: hook.component,\n        name: hook.name,\n        props: getValue(this, hook.props),\n      });\n    });\n\n    return wrappers;\n  }\n\n  public get instance () {\n    return getInstance(this.component);\n  }\n\n  public get component () {\n    return this.wrapper.find(this.TestedComponent);\n  }\n\n  public debug () {\n    // tslint:disable-next-line:no-console\n    console.log(this.wrapper.debug());\n  }\n\n  public html () {\n    return this.component.html();\n  }\n\n  public text () {\n    return this.component.text();\n  }\n\n  public find (selector: string | ComponentClass) {\n    return this.wrapper.find(selector);\n  }\n\n  public update () {\n    return this.wrapper.update();\n  }\n\n  public async sleep (ms?: number) {\n    await sleep(ms);\n  }\n\n  public async refresh (ms?: number) {\n    await sleep(ms);\n    this.update();\n  }\n\n  private getComponent (selector: ISelectArg) {\n    return isString(selector) ? this.find(selector).first() : selector;\n  }\n\n  public changeInput (selector: ISelectArg, value: string) {\n    const component = this.getComponent(selector);\n    component.simulate('focus');\n    component.simulate('change', { target: { value } });\n    component.simulate('blur');\n  }\n\n  public checkBox (selector: ISelectArg, checked = true) {\n    const component = this.getComponent(selector);\n    component.simulate('change', { target: { checked }});\n  }\n\n  public click (selector: ISelectArg) {\n    const component = this.getComponent(selector);\n    component.simulate('click');\n  }\n\n  public async submit (selector: ISelectArg = 'form') {\n    const component = this.getComponent(selector);\n    component.simulate('submit');\n    await this.refresh();\n  }\n\n  public createShallowWrapper () {\n    this.shallow = {};\n    const WrappedComponent = (this.TestedComponent as any).wrappedComponent as ComponentClass;\n\n    this.shallow.wrapper = this.config.enzyme.mount(\n      <WrappedComponent {...this.props} { ...this.AppState} />,\n    );\n    this.shallow.instance = getInstance(this.shallow.wrapper);\n  }\n\n  public async mount (mountOpts: { async?: boolean } = {}) {\n\n    // Loop through hooks onBeforeMount(),\n    // This MUST be a regular for () loop to not throw the promise away. (forEach won't work)\n    type IValidHook = IHook & { onBeforeMount: IOnBeforeMount };\n    const validHooks = this.config.getValidHooks(this, 'onBeforeMount') as IValidHook[];\n    for (const hook of validHooks) {\n      await hook.onBeforeMount(this, mountOpts);\n    }\n\n    // Allows you to fetch data to set as props, prepare extra stores, etc.\n    if (this.onBeforeMount) {\n      await this.onBeforeMount(this);\n    }\n\n    const initialMount = this.initialMount || <this.TestedComponent {...this.props} />;\n\n    const WrapperTree = this.getWrappers().reduce<any>((Tree, wrapper) => {\n      const wrapperChildren = wrapper.renderChildren !== false && Tree;\n      if (wrapper.props) {\n        return <wrapper.component {...wrapper.props}>{wrapperChildren}</wrapper.component>;\n      }\n      return Tree;\n    }, initialMount);\n\n    this.wrapper = await this.config.enzyme.mount(WrapperTree);\n\n    if (this.opts.shallow) {\n      this.createShallowWrapper();\n    }\n\n    if (mountOpts.async !== false) {\n      if (this.instance) {\n        await this.instance.componentDidMount();\n      }\n\n      // See https://github.com/enzymejs/enzyme/issues/1587\n      await flushPromises();\n      await this.refresh();\n    }\n\n    return this;\n  }\n}\n\nexport default Tester;\n","import Tester from './tester';\nimport { capitalize } from './utils';\nimport { ComponentClass, IConfig, IHook, IProfile, ITesterClass } from './interfaces';\n\n/*\n  Tester Configuration Class\n*/\nclass ConfigurationClass {\n  public enzyme: any;\n  public hooks: { [key: string]: IHook } = {};\n  public profiles: { [key: string]: IProfile } = {\n    // Default profile, each of it's properties can be overwritten.\n    Default: {} as IProfile,\n  };\n  public Tester: ITesterClass;\n\n  public constructor (argTester: ITesterClass) {\n    this.Tester = argTester;\n    argTester.Configuration = this;\n  }\n\n  public configure (enzyme: any, config: IConfig) {\n    this.enzyme = enzyme;\n\n    if (config.hooks) {\n      config.hooks.forEach((hook: IHook) => {\n        this.registerHook(hook);\n      });\n    }\n\n    if (config.profiles) {\n      config.profiles.forEach((profile) => {\n        this.registerProfile(profile);\n      });\n    }\n\n    this.createShortcuts();\n\n    return this.Tester;\n  }\n\n  /*\n    Create shortcuts for each global profiles\n    Tester shortcuts allows you to use a specific global profile without having to pass it in in the options.\n\n    E.g.\n    Using a new Tester.Light(MyComponent) allows you to skip the initialization of\n    Transport, localStorage + Session and AppState.\n  */\n  public createShortcuts () {\n    Object.keys(this.profiles).forEach((profileKey) => {\n      this.Tester[profileKey] = (TestedComponent: ComponentClass, opts = {}) =>\n        new this.Tester(TestedComponent, {...opts, profile: this.profiles[profileKey]});\n    });\n  }\n\n  /*\n    Hooks,\n    {\n      name: string,\n      component: React.Component,\n      props: object || fn(), // fn() allows this.AppState to be set for e.g\n      onInit: fn(),\n      onBeforeMount: fn(),\n      shortCuts: {shortCutName: fn()},\n      wrapper: fn() => { Component: React.Component, name: string, props: object }\n    }\n\n    Note: Order is important!\n  */\n  public registerHook (hook: IHook) {\n    if (!hook.name) { throw new Error('Tester.registerHook() : A hooks must have a name.'); }\n    if (this.hooks[hook.name]) {\n      throw new Error(`Tester.registerHook() : A hook named \"${hook.name}\" already exist.`);\n    }\n\n    // Validate hook properties here.\n\n    this.hooks[hook.name] = hook;\n  }\n\n  /*\n    Profiles,\n    {\n      // Profile keys must be hook names.\n    }\n  */\n  public registerProfile (profile: IProfile) {\n    if (!profile.name) { throw new Error('Tester.registerHook() : A hooks must have a name.'); }\n\n    const capitalizedName = capitalize(profile.name);\n\n    if (this.profiles[capitalizedName] && capitalizedName !== 'Default') {\n      throw new Error(`Tester.registerProfile() : A profile named \"${capitalizedName}\" already exist.`);\n    }\n\n    // Validate profile properties here.\n    //  - Does every key or the profile is a hook ?\n\n    this.profiles[capitalizedName] = profile;\n  }\n\n  public getValidHooks (tester: Tester, hookProp: string): IHook[] {\n    const hooks: IHook[] = [];\n\n    Object.values(this.hooks).forEach((hook) => {\n      let valid = true;\n      if (!tester.profile[hook.name]) { valid = false; }\n      if (hookProp && !hook[hookProp]) { valid = false; }\n\n      if (valid) {\n        hooks.push(hook);\n      }\n    });\n\n    return hooks;\n  }\n\n}\n\nexport default ConfigurationClass;\n","import Tester from './tester';\nimport ConfigurationClass from './ConfigurationClass';\n\nconst TesterConfig = new ConfigurationClass(Tester);\n\nexport {\n  Tester,\n  TesterConfig,\n};\n"],"names":["_sleep","sleep"],"mappings":"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"}